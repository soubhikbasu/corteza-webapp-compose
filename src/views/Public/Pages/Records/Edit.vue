<script>
import Grid from 'corteza-webapp-compose/src/components/Public/Page/Grid'
import uiScriptRunner from 'corteza-webapp-compose/src/mixins/ui-script-runner'
import ViewRecord from './View'

export default {
  name: 'EditRecord',

  components: {
    Grid,
  },

  extends: ViewRecord,

  mixins: [
    uiScriptRunner,
  ],

  data () {
    return {
      editMode: true,
    }
  },

  methods: {
    handleUpdate () {
      this.isProcessing()
      this.updateRecord(this.namespace, this.module, this.record)
        .then((record) => {
          this.$router.push({ name: 'page.record', params: { ...this.$route.params } })
        })
        .catch(this.defaultErrorHandler(this.$t('notification.record.updateFailed')))
        .finally(() => this.isProcessed())
    },

    handleBack () {
      this.$router.push({ name: 'page.record' })
    },
  },
}
</script>
